<h2 mat-dialog-title class="dialog-header">
  <span class="dialog-main-title">Registrar Venta</span>
  <button
    mat-icon-button
    mat-dialog-close
    class="close-button"
    (click)="onCancel()"
  >
    <mat-icon>close</mat-icon>
  </button>
</h2>

<mat-dialog-content class="dialog-content-padding">
  <p class="dialog-subtitle">
    Registra una nueva venta para: <strong>{{ userName }}</strong>
  </p>

  <form [formGroup]="saleForm" class="sale-register-form">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Monto de la Venta (S/)</mat-label>
      <input
        matInput
        type="number"
        formControlName="saleAmount"
        placeholder="Ej: 150.75"
        required
      />
      <mat-error
        *ngIf="
          saleForm.get('saleAmount')?.hasError('required') &&
          saleForm.get('saleAmount')?.touched
        "
        >El monto es obligatorio</mat-error
      >
      <mat-error
        *ngIf="
          saleForm.get('saleAmount')?.hasError('min') &&
          saleForm.get('saleAmount')?.touched
        "
        >El monto debe ser positivo</mat-error
      >
      <mat-error
        *ngIf="
          saleForm.get('saleAmount')?.hasError('pattern') &&
          saleForm.get('saleAmount')?.touched
        "
        >Formato de monto inválido (ej: 150.75)</mat-error
      >
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Cantidad</mat-label>
      <input
        matInput
        type="number"
        formControlName="quantity"
        placeholder="Ej: 1, 2, 5"
        required
      />
      <mat-error
        *ngIf="
          saleForm.get('quantity')?.hasError('required') &&
          saleForm.get('quantity')?.touched
        "
        >La cantidad es obligatoria</mat-error
      >
      <mat-error
        *ngIf="
          saleForm.get('quantity')?.hasError('min') &&
          saleForm.get('quantity')?.touched
        "
        >La cantidad debe ser al menos 1</mat-error
      >
      <mat-error
        *ngIf="
          saleForm.get('quantity')?.hasError('pattern') &&
          saleForm.get('quantity')?.touched
        "
        >La cantidad debe ser un número entero</mat-error
      >
    </mat-form-field>
    </form>
</mat-dialog-content>

<mat-dialog-actions align="end" class="dialog-actions-footer">
  <button mat-stroked-button color="warn" (click)="onCancel()">Cancelar</button>
  <button
    mat-flat-button
    color="primary"
    (click)="onRegister()"
    [disabled]="saleForm.invalid"
  >
    <mat-icon>save</mat-icon> Registrar
  </button>
</mat-dialog-actions>